# MacTool - Mac 电池充电功率监控工具

<div align="center">

🔋 一款简洁优雅的 macOS 应用，实时监控和分析 Mac 电池充电功率

</div>

## ✨ 功能特性

### 📊 实时监控
- **实时功率显示** - 大字体显示当前充电功率（精确到 0.01W）
- **电量百分比** - 实时显示电池电量，根据电量自动变色
- **充电状态** - 清晰显示是否在充电中
- **自动刷新** - 每 5 秒自动更新一次数据

### 📈 功率曲线图
- **1小时趋势** - 显示最近1小时的功率变化曲线
- **完整时间线** - 包括充电和未充电状态，清晰看到充电起止时间
- **交互式悬停** - 鼠标悬停显示详细数据（功率、时间、电量）
- **优雅可视化** - 蓝色曲线 + 渐变填充，美观易读

### 📉 统计分析
- **功率统计指标**
  - 最大功率、最小功率、平均功率
  - 带进度条可视化展示
  
- **数据统计指标**
  - 总数据点数
  - 充电数据点数
  - 数据完整度
  
- **功率趋势分析**
  - 最大功率对应的电量百分比
  - 功率开始下降的电量点（识别恒压充电阶段）
  
- **电量段功率分布**
  - 按 10% 电量分组统计平均功率
  - 条形图展示功率随电量变化趋势
  - 帮助了解不同电量下的充电效率

### 💾 数据管理
- **SQLite 存储** - 本地数据库保存历史数据
- **数据保留** - 最多保存 10,000 条数据点，保留最近 7 天
- **一键清空** - 方便清理历史数据
- **数据导出** - 快速打开数据库文件夹

## 🛠 技术特点

- **Swift + Cocoa** - 原生 macOS 应用，性能优秀
- **Auto Layout** - 自适应布局，支持窗口大小调整
- **定时监控** - 后台定时器持续监控
- **SQLite 数据库** - 高效的本地数据存储
- **图表可视化** - 自定义 NSView 绘制优雅曲线
- **内存安全** - WindowController 模式，无内存泄漏

## 📸 界面预览

### 主界面
- 顶部：大字体显示当前功率和电量
- 中部：功率曲线图（最近1小时）
- 底部：控制按钮（刷新、数据库管理、统计）

### 统计分析窗口
- 美观的富文本报告
- 带可视化进度条和图表
- 支持窗口大小调整
- 自适应内容布局

## 🚀 使用方法

1. 启动应用后，程序自动开始监控
2. 插入/拔出充电器，实时看到功率变化
3. 点击"查看统计"查看详细分析报告
4. 曲线图可以鼠标悬停查看详细数据

## 📋 数据说明

- **功率单位**：W（瓦特）
- **刷新频率**：5 秒/次
- **图表时长**：最近 1 小时
- **数据保留**：7 天或 10,000 条数据点

## 🔧 系统要求

- macOS 10.15 或更高版本
- 支持 Apple Silicon 和 Intel 芯片

## 🎨 主题切换

- **三种主题模式**
  - ☀️ 浅色模式 - 适合白天使用
  - 🌙 深色模式 - 适合夜间使用
  - 💻 跟随系统 - 自动跟随系统设置
  
- **快速测试开关**
  - 侧边栏底部提供快速切换开关
  - 充电功率页面右上角也有测试开关
  - 方便测试各页面的主题适配情况
  
- **统一颜色管理**
  - 所有颜色通过 `ThemeColors` 统一管理
  - 自动适配深色/浅色模式
  - 支持实时切换，无需重启

## 📝 TODO

- [ ] 将应用改为菜单栏应用（Menu Bar App），在顶部菜单栏实时显示功率
- [ ] 添加通知功能（充电功率异常提醒）
- [ ] 支持数据导出为 CSV 格式
- [x] ~~添加深色/浅色主题切换~~ ✅ 已完成！
- [ ] 支持自定义刷新频率
- [ ] 添加电池健康度追踪

## 📄 License

MIT License

## 👨‍💻 作者

Garenge

---

<div align="center">
Made with ❤️ for Mac users
</div>

